services:
  - type: web
    name: intranet-multimodal
    env: node
    plan: starter
    buildCommand: npm install
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: NODE_VERSION
        value: '18'
      - key: PORT
        value: 10000
      # ========== SEGURANÇA ==========
      - key: SESSION_SECRET
        sync: false
      - key: JWT_SECRET
        sync: false
      # ========== SUPABASE ==========
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_ANON_KEY
        sync: false
      - key: SUPABASE_SERVICE_KEY
        sync: false
      - key: SUPABASE_SERVICE_ROLE_KEY
        sync: false
      # ========== EVOLUTION API ==========
      # NOTA: As configurações de Evolution API são gerenciadas por usuário
      # através da tabela user_evolution_apis no Supabase (Settings > Evolution API)
      # Esta variável é usada apenas como fallback/URL base
      - key: EVOLUTION_BASE_URL
        sync: false
      # Variáveis opcionais para fallback (não obrigatórias se usar configuração por usuário)
      - key: EVOLUTION_API_KEY
        sync: false
        optional: true
      - key: EVOLUTION_INSTANCE_NAME
        sync: false
        optional: true
      # ========== OPENAI ==========
      - key: OPENAI_API_KEY
        sync: false
      # ========== CONFIGURAÇÕES OPCIONAIS ==========
      - key: PUBLIC_BASE_URL
        sync: false
        optional: true
      - key: ALLOWED_ORIGINS
        sync: false
        optional: true
      - key: DEBUG_MODE
        value: 'false'
        optional: true
      - key: LOG_LEVEL
        value: 'info'
        optional: true

